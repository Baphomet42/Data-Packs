tag @e remove 42.portal_new_spawn
summon block_display ~ ~ ~ {Tags:["42.portal_new_spawn","42.portal_elevator_group","42.portal_elevator_start"],CustomNameVisible:0b,CustomName:'{"text":"42portal"}',block_state:{Name:smooth_quartz_stairs,Properties:{facing:north}},view_range:10f,transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[-1.5f,0f,1.5f],scale:[3f,.525f,.5f]},Passengers:[{id:block_display,Tags:["42.portal_elevator_group","42.portal_new_spawn"],CustomNameVisible:0b,CustomName:'{"text":"42portal"}',block_state:{Name:smooth_quartz_stairs,Properties:{facing:south}},view_range:10f,transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[-1.5f,0f,-2f],scale:[3f,.525f,.5f]}},{id:block_display,Tags:["42.portal_elevator_group","42.portal_new_spawn"],CustomNameVisible:0b,CustomName:'{"text":"42portal"}',block_state:{Name:smooth_quartz_stairs,Properties:{facing:east}},view_range:10f,transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[-2f,0f,-1.5f],scale:[.5f,.525f,3f]}},{id:block_display,Tags:["42.portal_elevator_group","42.portal_new_spawn"],CustomNameVisible:0b,CustomName:'{"text":"42portal"}',block_state:{Name:smooth_quartz_stairs,Properties:{facing:west}},view_range:10f,transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[1.5f,0f,-1.5f],scale:[.5f,.525f,3f]}},{id:block_display,Tags:["42.portal_elevator_group","42.portal_new_spawn"],CustomNameVisible:0b,CustomName:'{"text":"42portal"}',block_state:{Name:smooth_quartz},view_range:10f,transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[-1.5f,0f,-1.5f],scale:[.125f,.525f,.125f]}},{id:block_display,Tags:["42.portal_elevator_group","42.portal_new_spawn"],CustomNameVisible:0b,CustomName:'{"text":"42portal"}',block_state:{Name:smooth_quartz},view_range:10f,transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[1.375f,0f,-1.5f],scale:[.125f,.525f,.125f]}},{id:block_display,Tags:["42.portal_elevator_group","42.portal_new_spawn"],CustomNameVisible:0b,CustomName:'{"text":"42portal"}',block_state:{Name:smooth_quartz},view_range:10f,transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[-1.5f,0f,1.375f],scale:[.125f,.525f,.125f]}},{id:block_display,Tags:["42.portal_elevator_group","42.portal_new_spawn"],CustomNameVisible:0b,CustomName:'{"text":"42portal"}',block_state:{Name:smooth_quartz},view_range:10f,transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[1.375f,0f,1.375f],scale:[.125f,.525f,.125f]}},{id:block_display,Tags:["42.portal_elevator_group","42.portal_new_spawn"],CustomNameVisible:0b,CustomName:'{"text":"42portal"}',block_state:{Name:smooth_quartz},view_range:10f,transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[-1.5f,3f,-1.5f],scale:[.125f,1f,.125f]}},{id:block_display,Tags:["42.portal_elevator_group","42.portal_new_spawn"],CustomNameVisible:0b,CustomName:'{"text":"42portal"}',block_state:{Name:smooth_quartz},view_range:10f,transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[1.375f,3f,-1.5f],scale:[.125f,1f,.125f]}},{id:block_display,Tags:["42.portal_elevator_group","42.portal_new_spawn"],CustomNameVisible:0b,CustomName:'{"text":"42portal"}',block_state:{Name:smooth_quartz},view_range:10f,transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[-1.5f,3f,1.375f],scale:[.125f,1f,.125f]}},{id:block_display,Tags:["42.portal_elevator_group","42.portal_new_spawn"],CustomNameVisible:0b,CustomName:'{"text":"42portal"}',block_state:{Name:smooth_quartz},view_range:10f,transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[1.375f,3f,1.375f],scale:[.125f,1f,.125f]}}]}
execute align xyz run summon panda ~.5 ~.5 ~.5 {Tags:["42.portal_elevator","42.portal_elevator_group","42.portal_new_spawn"],CustomNameVisible:0b,CustomName:'{"text":"Elevator"}',Invulnerable:1,NoGravity:1,DeathLootTable:"minecraft:empty",Silent:1,active_effects:[{id:"invisibility",duration:-1,show_particles:0b}],Attributes:[{Name:"generic.movement_speed",Base:-127}],Passengers:[{id:block_display,Tags:["42.portal_elevator_group","42.portal_new_spawn"],CustomNameVisible:0b,CustomName:'{"text":"42portal"}',block_state:{Name:black_shulker_box},view_range:10f,transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[-1.25f,-1.5f,-1.25f],scale:[2.5f,.275f,2.5f]}},{id:block_display,Tags:["42.portal_elevator_group","42.portal_new_spawn"],CustomNameVisible:0b,CustomName:'{"text":"42portal"}',block_state:{Name:blast_furnace},view_range:10f,transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[-1.25f,1.75f,-1.25f],scale:[2.5f,.25f,2.5f]}},{id:block_display,Tags:["42.portal_elevator_group","42.portal_new_spawn"],CustomNameVisible:0b,CustomName:'{"text":"42portal"}',block_state:{Name:quartz_block},view_range:10f,transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[-1.375f,-1.75f,-1.375f],scale:[2.75f,.25f,2.75f]}},{id:block_display,Tags:["42.portal_elevator_group","42.portal_new_spawn"],CustomNameVisible:0b,CustomName:'{"text":"42portal"}',block_state:{Name:quartz_block},view_range:10f,transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[-1.375f,2f,-1.375f],scale:[2.75f,.25f,2.75f]}},{id:block_display,Tags:["42.portal_elevator_group","42.portal_new_spawn"],CustomNameVisible:0b,CustomName:'{"text":"42portal"}',block_state:{Name:polished_blackstone},view_range:10f,transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[-1.25f,-1.5f,-1.375f],scale:[2.5f,1.25f,.125f]}},{id:block_display,Tags:["42.portal_elevator_group","42.portal_new_spawn"],CustomNameVisible:0b,CustomName:'{"text":"42portal"}',block_state:{Name:polished_blackstone},view_range:10f,transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[-1.25f,-1.5f,1.25f],scale:[.25f,1.25f,.125f]}},{id:block_display,Tags:["42.portal_elevator_group","42.portal_new_spawn"],CustomNameVisible:0b,CustomName:'{"text":"42portal"}',block_state:{Name:polished_blackstone},view_range:10f,transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[1f,-1.5f,1.25f],scale:[.25f,1.25f,.125f]}},{id:block_display,Tags:["42.portal_elevator_group","42.portal_new_spawn"],CustomNameVisible:0b,CustomName:'{"text":"42portal"}',block_state:{Name:polished_blackstone},view_range:10f,transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[-1.375f,-1.5f,-1.25f],scale:[.125f,1.25f,2.5f]}},{id:block_display,Tags:["42.portal_elevator_group","42.portal_new_spawn"],CustomNameVisible:0b,CustomName:'{"text":"42portal"}',block_state:{Name:polished_blackstone},view_range:10f,transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[1.25f,-1.5f,-1.25f],scale:[.125f,1.25f,2.5f]}},{id:block_display,Tags:["42.portal_elevator_group","42.portal_new_spawn"],CustomNameVisible:0b,CustomName:'{"text":"42portal"}',block_state:{Name:polished_diorite},view_range:10f,transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[-1.25f,-.25f,-1.375f],scale:[2.5f,2.25f,.125f]}},{id:block_display,Tags:["42.portal_elevator_group","42.portal_new_spawn"],CustomNameVisible:0b,CustomName:'{"text":"42portal"}',block_state:{Name:polished_diorite},view_range:10f,transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[-1.25f,-.25f,1.25f],scale:[.25f,2.25f,.125f]}},{id:block_display,Tags:["42.portal_elevator_group","42.portal_new_spawn"],CustomNameVisible:0b,CustomName:'{"text":"42portal"}',block_state:{Name:polished_diorite},view_range:10f,transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[1f,-.25f,1.25f],scale:[.25f,2.25f,.125f]}},{id:block_display,Tags:["42.portal_elevator_group","42.portal_new_spawn"],CustomNameVisible:0b,CustomName:'{"text":"42portal"}',block_state:{Name:polished_diorite},view_range:10f,transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[-1.375f,-.25f,-1.25f],scale:[.125f,2.25f,2.5f]}},{id:block_display,Tags:["42.portal_elevator_group","42.portal_new_spawn"],CustomNameVisible:0b,CustomName:'{"text":"42portal"}',block_state:{Name:polished_diorite},view_range:10f,transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[1.25f,-.25f,-1.25f],scale:[.125f,2.25f,2.5f]}},{id:block_display,Tags:["42.portal_elevator_group","42.portal_new_spawn"],CustomNameVisible:0b,CustomName:'{"text":"42portal"}',block_state:{Name:smooth_quartz},view_range:10f,transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[-1.375f,-1.625f,-1.5f],scale:[2.75f,3.75f,.125f]}},{id:block_display,Tags:["42.portal_elevator_group","42.portal_new_spawn"],CustomNameVisible:0b,CustomName:'{"text":"42portal"}',block_state:{Name:quartz_block},view_range:10f,transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[-1.375f,-1.625f,1.375f],scale:[.5f,3.75f,.125f]}},{id:block_display,Tags:["42.portal_elevator_group","42.portal_new_spawn"],CustomNameVisible:0b,CustomName:'{"text":"42portal"}',block_state:{Name:quartz_block},view_range:10f,transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[.875f,-1.625f,1.375f],scale:[.5f,3.75f,.125f]}},{id:block_display,Tags:["42.portal_elevator_group","42.portal_new_spawn"],CustomNameVisible:0b,CustomName:'{"text":"42portal"}',block_state:{Name:smooth_quartz},view_range:10f,transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[-1.5f,-1.625f,-1.375f],scale:[.125f,3.75f,2.75f]}},{id:block_display,Tags:["42.portal_elevator_group","42.portal_new_spawn"],CustomNameVisible:0b,CustomName:'{"text":"42portal"}',block_state:{Name:smooth_quartz},view_range:10f,transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[1.375f,-1.625f,-1.375f],scale:[.125f,3.75f,2.75f]}}]}
execute as @e[tag=42.portal_new_spawn,tag=42.portal_elevator,limit=1] run function 42:portal/new_id
scoreboard players operation @e[tag=42.portal_new_spawn] 42.portal_id = @e[tag=42.portal_new_spawn,tag=42.portal_elevator,limit=1] 42.portal_id
scoreboard players set @e[type=!player,tag=42.portal_new_spawn] 42.datapack 3
scoreboard players set @e[tag=42.portal_new_spawn,tag=42.portal_elevator] 42.portal_y 0
scoreboard players set @e[tag=42.portal_new_spawn,tag=42.portal_elevator] 42.portal_skin 0
team join 42.no_col @e[tag=42.portal_new_spawn,tag=42.portal_elevator]
#
execute as @p at @s run function 42:portal/get_rot
execute if entity @e[tag=42.portal_rot,tag=42.portal_rot_e] as @e[tag=42.portal_new_spawn,tag=42.portal_elevator_group] at @s run tp @s ~ ~ ~ ~90 ~
execute if entity @e[tag=42.portal_rot,tag=42.portal_rot_s] as @e[tag=42.portal_new_spawn,tag=42.portal_elevator_group] at @s run tp @s ~ ~ ~ ~90 ~
execute if entity @e[tag=42.portal_rot,tag=42.portal_rot_s] as @e[tag=42.portal_new_spawn,tag=42.portal_elevator_group] at @s run tp @s ~ ~ ~ ~90 ~
execute if entity @e[tag=42.portal_rot,tag=42.portal_rot_w] as @e[tag=42.portal_new_spawn,tag=42.portal_elevator_group] at @s run tp @s ~ ~ ~ ~90 ~
execute if entity @e[tag=42.portal_rot,tag=42.portal_rot_w] as @e[tag=42.portal_new_spawn,tag=42.portal_elevator_group] at @s run tp @s ~ ~ ~ ~90 ~
execute if entity @e[tag=42.portal_rot,tag=42.portal_rot_w] as @e[tag=42.portal_new_spawn,tag=42.portal_elevator_group] at @s run tp @s ~ ~ ~ ~90 ~
execute run function 42:portal/get_rot2
#
fill ~-2 ~ ~-2 ~2 ~2 ~2 barrier replace #42:portal_replace
fill ~-1 ~ ~-1 ~1 ~ ~1 smooth_quartz_slab replace barrier
fill ~-1 ~3 ~-2 ~1 ~3 ~-2 smooth_quartz_stairs[facing=south,half=top] replace #42:portal_replace
fill ~-1 ~3 ~2 ~1 ~3 ~2 smooth_quartz_stairs[facing=north,half=top] replace #42:portal_replace
fill ~2 ~3 ~-1 ~2 ~3 ~1 smooth_quartz_stairs[facing=west,half=top] replace #42:portal_replace
fill ~-2 ~3 ~-1 ~-2 ~3 ~1 smooth_quartz_stairs[facing=east,half=top] replace #42:portal_replace
execute as @e[tag=42.portal_new_spawn,tag=42.portal_elevator_start] at @s run fill ^-1 ^ ^-1 ^1 ^2 ^2 air replace barrier
#
tag @e remove 42.portal_new_spawn
kill @s[type=area_effect_cloud]